# Planning Page - Design Draft v2

## Page Overview
High-level financial planning view showing 12+ months at a glance with income, budgets, housing, and detailed savings projections.

---

## Layout Concept - FINAL

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Planning                                                                                          â”‚
â”‚ Plan your finances month by month                                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                                   â”‚
â”‚ Year View: [2026 â–¼]                    [â† 2025] [2026] [2027 â†’]                                â”‚
â”‚                                                                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ SUMMARY CARDS (top row)                                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Gross Income     â”‚ â”‚ Net Income       â”‚ â”‚ Total Budgeted   â”‚ â”‚ Total Projected Savings  â”‚   â”‚
â”‚ â”‚ (2026)           â”‚ â”‚ (2026)           â”‚ â”‚ (2026)           â”‚ â”‚ (2026)                   â”‚   â”‚
â”‚ â”‚                  â”‚ â”‚                  â”‚ â”‚                  â”‚ â”‚                          â”‚   â”‚
â”‚ â”‚   $96,000        â”‚ â”‚   $72,000        â”‚ â”‚   $48,000        â”‚ â”‚   $27,600                â”‚   â”‚
â”‚ â”‚                  â”‚ â”‚  (75% of gross)  â”‚ â”‚                  â”‚ â”‚                          â”‚   â”‚
â”‚ â”‚                  â”‚ â”‚                  â”‚ â”‚                  â”‚ â”‚   Auto:   $7,200 (26%)   â”‚   â”‚
â”‚ â”‚                  â”‚ â”‚                  â”‚ â”‚                  â”‚ â”‚   401k:  $10,800 (39%)   â”‚   â”‚
â”‚ â”‚                  â”‚ â”‚                  â”‚ â”‚                  â”‚ â”‚   HSA:    $3,600 (13%)   â”‚   â”‚
â”‚ â”‚                  â”‚ â”‚                  â”‚ â”‚                  â”‚ â”‚   Cash:   $6,000 (22%)   â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ MONTHLY BREAKDOWN TABLE                                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                                   â”‚
â”‚ Month    â”‚ Grossâœ â”‚ Net    â”‚ Housingâœ â”‚ Budgetâœ â”‚ Add'lâœ â”‚ Projected â”‚ Savings â”‚ %    â”‚       â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚ Jan 2026 â”‚ $8,000 â”‚ $6,000 â”‚ $1,500   â”‚ $4,000  â”‚ $500   â”‚ $6,000    â”‚ $0      â”‚ 0%   â”‚       â”‚
â”‚ Feb 2026 â”‚ $8,000 â”‚ $6,000 â”‚ $1,500   â”‚ $4,000  â”‚ $0     â”‚ $5,500    â”‚ $500    â”‚ 8%   â”‚       â”‚
â”‚ Mar 2026 â”‚ $8,000 â”‚ $6,000 â”‚ $1,500   â”‚ $4,000  â”‚ $1,200 â”‚ $6,700    â”‚ -$700   â”‚ -12% â”‚ âš ï¸   â”‚
â”‚ Apr 2026 â”‚ $8,000 â”‚ $6,000 â”‚ $1,500   â”‚ $4,000  â”‚ $0     â”‚ $5,500    â”‚ $500    â”‚ 8%   â”‚       â”‚
â”‚ May 2026 â”‚ $8,000 â”‚ $6,000 â”‚ $1,500   â”‚ $4,000  â”‚ $0     â”‚ $5,500    â”‚ $500    â”‚ 8%   â”‚       â”‚
â”‚ Jun 2026 â”‚ $8,000 â”‚ $6,000 â”‚ $1,500   â”‚ $4,000  â”‚ $0     â”‚ $5,500    â”‚ $500    â”‚ 8%   â”‚       â”‚
â”‚ Jul 2026 â”‚ $8,000 â”‚ $6,000 â”‚ $1,500   â”‚ $4,000  â”‚ $0     â”‚ $5,500    â”‚ $500    â”‚ 8%   â”‚       â”‚
â”‚ Aug 2026 â”‚ $8,000 â”‚ $6,000 â”‚ $1,500   â”‚ $4,000  â”‚ $0     â”‚ $5,500    â”‚ $500    â”‚ 8%   â”‚       â”‚
â”‚ Sep 2026 â”‚ $8,000 â”‚ $6,000 â”‚ $1,500   â”‚ $4,000  â”‚ $0     â”‚ $5,500    â”‚ $500    â”‚ 8%   â”‚       â”‚
â”‚ Oct 2026 â”‚ $8,000 â”‚ $6,000 â”‚ $1,500   â”‚ $4,000  â”‚ $0     â”‚ $5,500    â”‚ $500    â”‚ 8%   â”‚       â”‚
â”‚ Nov 2026 â”‚ $8,000 â”‚ $6,000 â”‚ $1,500   â”‚ $4,000  â”‚ $0     â”‚ $5,500    â”‚ $500    â”‚ 8%   â”‚       â”‚
â”‚ Dec 2026 â”‚ $8,000 â”‚ $6,000 â”‚ $1,500   â”‚ $4,000  â”‚ $0     â”‚ $5,500    â”‚ $500    â”‚ 8%   â”‚       â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚ TOTAL    â”‚ $96,000â”‚ $72,000â”‚ $18,000  â”‚ $48,000 â”‚ $1,700 â”‚ $67,700   â”‚ $4,300  â”‚ 6%   â”‚       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜       â”‚
```

---

## Simplified Columns

### Gross Income âœ (Editable)
- Sum of recurring income amounts BEFORE deductions
- Click to override for planning

### Net Income (Auto-calculated)
- Gross minus all deductions (taxes, 401k, HSA, auto savings)
- This is take-home pay

### Housing âœ (Editable)
- Rent, mortgage, property tax
- Separate from other budget categories

### Budget âœ (Editable)
- Sum of all category budgets (excluding housing)
- Click to override for planning

### Add'l Expenses âœ (Editable)
- One-time expenses for the month
- Vacations, car repairs, etc.

### Projected Total (Auto-calculated)
- Housing + Budget + Additional
- Total expected spending

### Savings (Auto-calculated)
- Net Income - Projected Total
- How much left over (or deficit)

### % (Auto-calculated)
- (Savings / Net Income) Ã— 100
- Savings rate based on take-home pay

**Note:** Auto savings, 401k, and HSA are already deducted from Net Income and shown in the summary card breakdown!

---

## Column Explanations (Updated)

### Gross Income âœ (Editable)
- **Source**: Sum of all recurring income amounts (BEFORE deductions)
- **Includes**: Full salary/wages before anything is taken out
- **Calculation**: `amount` field from recurring_income
- **Example**: $8,000/month gross salary
- **Editable**: Click to override for planning (raises, bonuses, etc.)

### Net Income (Auto-calculated)
- **Source**: Gross - (Taxes + 401k + HSA + Auto Savings)
- **Calculation**: 
  ```
  Net = Gross - federal_tax - state_tax - fica_tax 
        - retirement_401k - hsa_contribution - auto_savings
  ```
- **Example**: 
  ```
  $8,000 (gross)
  - $1,200 (federal tax)
  - $400 (state tax)
  - $612 (FICA: 7.65%)
  - $900 (401k)
  - $300 (HSA)
  - $600 (auto savings)
  = $5,988 â‰ˆ $6,000 (net/take-home)
  ```
- **Purpose**: What actually hits your bank account
- **Display**: Shows amount + percentage of gross
- **NOT Editable**: Auto-calculated from deductions

### Deduction Breakdown in Income Details:
When you click on Gross Income, show breakdown:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Income Breakdown - January 2026     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Gross Income:        $8,000         â”‚
â”‚                                     â”‚
â”‚ DEDUCTIONS:                         â”‚
â”‚ Federal Tax:        -$1,200  (15%)  â”‚
â”‚ State Tax:          -$400    (5%)   â”‚
â”‚ FICA:               -$612    (7.65%)â”‚
â”‚ 401k:               -$900    (11%)  â”‚
â”‚ HSA:                -$300    (4%)   â”‚
â”‚ Auto Savings:       -$600    (8%)   â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”‚
â”‚ Total Deductions:   -$4,012  (50%)  â”‚
â”‚                                     â”‚
â”‚ NET TAKE-HOME:       $3,988         â”‚
â”‚                                     â”‚
â”‚ [Edit Gross] [Edit Deductions]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Housing âœ (Editable)
- **Source**: User input
- **Purpose**: Separate housing costs (rent/mortgage)
- **Why Separate**: Major expense category, often want to track independently
- **Example**: $1,500/month rent or mortgage payment
- **Includes**: Rent, mortgage, property tax, HOA fees

### Budget âœ (Editable)
- **Default Source**: Sum of all category budgets (excluding housing)
- **Calculation**: Adds up monthly_budget from categories
- **Uses Budget History**: Shows correct historical values if budgets changed
- **Editable**: Click to override for planning scenarios
- **Example**: Default $4,000, edit to $3,500 (planning to cut spending)

### Add'l Expenses âœ (Editable)
- **Source**: User input only
- **Purpose**: One-time expenses not in regular budget
- **Examples**: 
  - January: "$500" (Holiday bills)
  - March: "$1,200" (Vacation trip)
  - July: "$0" (Nothing extra)
- **Storage**: planning_additional_expenses table
- **Default**: $0

### Projected Total (Auto-calculated)
- **Calculation**: Housing + Budget + Additional Expenses
- **Formula**: `projected = housing + budget + additional`
- **Example**: $1,500 + $4,000 + $500 = $6,000
- **Purpose**: Total expected spending for the month
- **Note**: NOT editable (auto-calculated from other columns)

### Auto Savings âœ (Editable)
- **Default Source**: Sum of auto_savings from recurring_income
- **Calculation**: Gets auto_savings amounts for that month's income
- **Editable**: Click to override planned savings amount
- **Example**: Default $600, edit to $800 (want to save more)
- **Purpose**: Automated savings transfers

### 401k âœ (Editable)
- **Default Source**: Sum of retirement_401k from recurring_income
- **Calculation**: Gets 401k amounts for that month's income
- **Editable**: Click to override planned contributions
- **Example**: Default $900, edit to $1,200 (increasing contribution)
- **Purpose**: Retirement savings

### HSA âœ (Editable)
- **Default Source**: Sum of hsa_contribution from recurring_income
- **Calculation**: Gets HSA amounts for that month's income
- **Editable**: Click to override planned contributions
- **Example**: Default $300, edit to $400 (maxing out HSA)
- **Purpose**: Health savings account

### Cash Savings (Auto-calculated)
- **Calculation**: Income - Projected - Auto - 401k - HSA
- **Formula**: `cash = income - projected - auto_savings - retirement_401k - hsa`
- **Example**: $6,000 - $6,000 - $600 - $900 - $300 = -$800 (deficit)
- **Color Coding**:
  - Green if positive (adding to cash reserves)
  - Red if negative (dipping into reserves)
- **Purpose**: Leftover cash after all expenses and automatic savings
- **Note**: NOT editable (auto-calculated)

### Total Savings (Auto-calculated)
- **Calculation**: Auto + 401k + HSA + Cash
- **Formula**: `total = auto_savings + retirement_401k + hsa + cash_savings`
- **Example**: $600 + $900 + $300 + $200 = $2,000
- **Purpose**: Complete savings picture
- **Note**: NOT editable (auto-calculated)

### % Savings Rate (Auto-calculated)
- **Calculation**: (Total Savings / Income) Ã— 100
- **Formula**: `rate = (total_savings / income) Ã— 100`
- **Example**: ($2,000 / $6,000) Ã— 100 = 33%
- **Benchmark**: 
  - <20% = Red (too low)
  - 20-35% = Yellow (good)
  - >35% = Green (excellent)

---

## Summary Card - Detailed Breakdown

The "Total Projected Savings" card shows the complete picture:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Total Projected Savings (2026)         â”‚
â”‚                                        â”‚
â”‚        $27,600                         â”‚
â”‚                                        â”‚
â”‚   Auto Savings:   $7,200 (26%)         â”‚
â”‚   401k:          $10,800 (39%)         â”‚
â”‚   HSA:            $3,600 (13%)         â”‚
â”‚   Cash Savings:   $6,000 (22%)         â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚
â”‚   Total Rate:     38% of income        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Percentages** show each category's share of total savings:
- Auto: $7,200 / $27,600 = 26%
- 401k: $10,800 / $27,600 = 39%
- HSA: $3,600 / $27,600 = 13%
- Cash: $6,000 / $27,600 = 22%

---

## Interactive Editing

### Click Any Editable Column:

**Example: Editing Income**
```
Click $6,000 in Income column:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Edit Income - January 2026  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Amount: [$6,000    ]        â”‚
â”‚                             â”‚
â”‚ Default from recurring:     â”‚
â”‚ $6,000                      â”‚
â”‚                             â”‚
â”‚ [Reset to Default] [Save]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Example: Editing Housing**
```
Click $1,500 in Housing column:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Edit Housing - January 2026 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Amount: [$1,500    ]        â”‚
â”‚ Notes:  [Rent       ]       â”‚
â”‚                             â”‚
â”‚ [Cancel]  [Save]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Example: Editing 401k**
```
Click $900 in 401k column:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Edit 401k - January 2026    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Amount: [$900      ]        â”‚
â”‚                             â”‚
â”‚ Default from income:        â”‚
â”‚ $900                        â”‚
â”‚                             â”‚
â”‚ [Reset to Default] [Save]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Calculation Flow

### On Page Load:
```
For each month (Jan - Dec):
  1. Get recurring income â†’ Calculate default Income
  2. Get category budgets â†’ Calculate default Budget  
  3. Get saved overrides â†’ Apply user edits
  4. Calculate: Projected = Housing + Budget + Add'l
  5. Get income savings fields â†’ Calculate Auto, 401k, HSA
  6. Calculate: Cash = Income - Projected - Auto - 401k - HSA
  7. Calculate: Total = Auto + 401k + HSA + Cash
  8. Calculate: % = (Total / Income) Ã— 100
```

### On User Edit:
```
User clicks Income field:
  1. Show modal with current value
  2. User changes $6,000 â†’ $7,500
  3. Save override to planning_overrides table
  4. Recalculate Cash Savings
  5. Recalculate Total Savings
  6. Recalculate %
  7. Update display
```

---

## Database Changes Needed

### New Table: planning_overrides
```sql
CREATE TABLE planning_overrides (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES users(id),
  month_year TEXT NOT NULL, -- 'YYYY-MM'
  
  -- Editable fields
  income_override NUMERIC(10, 2),
  housing_override NUMERIC(10, 2),
  budget_override NUMERIC(10, 2),
  additional_expenses NUMERIC(10, 2),
  auto_savings_override NUMERIC(10, 2),
  retirement_401k_override NUMERIC(10, 2),
  hsa_override NUMERIC(10, 2),
  
  -- Optional notes
  housing_notes TEXT,
  additional_notes TEXT,
  
  created_at TIMESTAMP,
  updated_at TIMESTAMP,
  UNIQUE(user_id, month_year)
);
```

### Indexes
```sql
CREATE INDEX idx_planning_user_month 
ON planning_overrides(user_id, month_year);
```

---

## Color Coding

### Cash Savings Column:
```
Green background: Positive (building cash reserves)
Red background: Negative (spending from reserves)
Yellow background: Low but positive (<$100)
```

### Total Savings % Column:
```
Green text: >35% (excellent savings rate)
Yellow text: 20-35% (good savings rate)
Red text: <20% (needs improvement)
```

### Row States:
```
Current month: Blue left border
Past months: Gray text (actual data if available)
Future months: Normal (planning mode)
Negative cash: Red highlight on entire row
```

---

## Visual Example - March (Negative Cash)

```
Month    â”‚Incomeâœâ”‚Housingâœâ”‚Budgetâœâ”‚Add'lâœâ”‚Projectedâ”‚Auto$âœâ”‚401kâœâ”‚HSAâœâ”‚Cash   â”‚Totalâ”‚  %   â”‚
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”‚
Mar 2026  â”‚$6,000 â”‚$1,500  â”‚$4,000 â”‚$1,200â”‚$6,700   â”‚$600  â”‚$900 â”‚$300â”‚-$600  â”‚$1,800â”‚30% â”‚
          â”‚       â”‚        â”‚       â”‚      â”‚         â”‚      â”‚     â”‚    â”‚ âš ï¸ ğŸ”´â”‚     â”‚      â”‚
```

**Warning indicator**: "âš ï¸ Cash deficit - will need to reduce spending or use reserves"

---

## Smart Features

### Default Value Calculation:
- **Income**: Sum actual recurring income occurrences
- **Budget**: Sum current category budgets (with history)
- **Auto/401k/HSA**: Pull from recurring_income fields
- **User can override** any default for planning scenarios

### Reset to Default:
- Every editable field has "Reset to Default" button
- Removes override, recalculates from source data
- Useful for "what-if" scenarios

### Bulk Edit:
```
Select multiple months:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Bulk Edit - Apr-Dec 2026        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Apply to all 9 selected months: â”‚
â”‚                                 â”‚
â”‚ â˜‘ Housing: [$1,600    ]         â”‚
â”‚ â˜‘ 401k:    [$1,000    ]         â”‚
â”‚ â˜ HSA:     [$300      ]         â”‚
â”‚                                 â”‚
â”‚ [Cancel]  [Apply]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Mobile Responsive

### Desktop (all columns):
Full table with all columns visible

### Tablet (scrollable):
Table scrolls horizontally, all columns available

### Mobile (simplified view):
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ January 2026              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Income:      $6,000  âœ    â”‚
â”‚ Housing:     $1,500  âœ    â”‚
â”‚ Budget:      $4,000  âœ    â”‚
â”‚ Add'l Exp:   $500    âœ    â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚ Projected:   $6,000        â”‚
â”‚                            â”‚
â”‚ Auto Save:   $600    âœ    â”‚
â”‚ 401k:        $900    âœ    â”‚
â”‚ HSA:         $300    âœ    â”‚
â”‚ Cash Save:   $200          â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚ Total Save:  $2,000 (33%) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[< Previous Month] [Next Month >]
```

---

## Example Scenarios

### Scenario 1: Planning a Raise
```
Current: $6,000/month
Starting April: $7,000/month

User edits:
- Apr-Dec Income: $7,000
- Auto Savings: $700 (increase by $100)
- 401k: $1,050 (increase to 15%)

Result: See impact on cash savings and total savings rate
```

### Scenario 2: Vacation Planning
```
July - Family vacation

User edits:
- July Add'l Expenses: $3,000
- May-Jun Auto Savings: $900 (save extra beforehand)

Result: See if can afford vacation without going negative
```

### Scenario 3: Moving to New Apartment
```
Starting June: New rent

User edits:
- Jun-Dec Housing: $1,800 (increased rent)
- Jun-Dec Budget: $3,500 (reduce other spending)

Result: See if budget balances with higher rent
```

---

## Data Sources

### Income (default):
```sql
SELECT SUM(amount * occurrences) 
FROM recurring_income 
WHERE user_id = ? AND month = ?
```

### Housing (default):
```sql
-- Could pull from a specific category marked as "Housing"
-- OR default to $0, user must input
```

### Budget (default):
```sql
-- Check budget history first
SELECT COALESCE(
  (SELECT SUM(monthly_budget) 
   FROM category_budget_history 
   WHERE month_year = ?),
  (SELECT SUM(monthly_budget) 
   FROM categories 
   WHERE user_id = ?)
)
```

### Auto/401k/HSA (default):
```sql
SELECT 
  SUM(auto_savings),
  SUM(retirement_401k),
  SUM(hsa_contribution)
FROM recurring_income
WHERE user_id = ? AND month = ?
```

---

## Next Steps

Ready to build! This includes:
1. âœ… All columns editable
2. âœ… Housing costs column
3. âœ… Detailed savings breakdown (Auto, 401k, HSA, Cash)
4. âœ… Summary card showing all savings sources
5. âœ… Auto-calculations for Projected, Cash, Total, %

Shall I proceed with building v5.4.0? ğŸš€


---

## Interactive Features

### Editable Additional Expenses
```
Click the [$500]âœ field:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Additional Expenses - Jan   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Amount: [$500      ]        â”‚
â”‚ Notes:  [Holiday bills]     â”‚
â”‚                             â”‚
â”‚ [Cancel]  [Save]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Year Navigation
- Arrows to go backward/forward
- Dropdown to jump to specific year
- Always shows 12 months of selected year

### Responsive Design
**Mobile view:**
- Cards stack vertically
- Table scrolls horizontally
- Simplified view option (toggle to show fewer columns)

---

## Visual Enhancements

### Color Coding
```
Savings column:
â”œâ”€ Green background: Positive savings
â”œâ”€ Red background: Negative (deficit)
â””â”€ Yellow background: Low (<10%)

Percentage column:
â”œâ”€ Green text: >20%
â”œâ”€ Yellow text: 10-20%
â””â”€ Red text: <10%
```

### Row Highlighting
- Hover: Light gray background
- Current month: Blue border/highlight
- Past months: Slightly dimmed
- Future months: Normal brightness

---

## Data Flow

### Income Calculation
```javascript
For each month:
1. Get all recurring_income for user
2. Calculate actual occurrences in month (using count logic)
3. Sum all income sources
4. Return monthly total
```

### Budget Calculation
```javascript
For each month:
1. Get all categories for user
2. Check category_budget_history for that month
3. If history exists, use historical budget
4. If no history, use current monthly_budget
5. Sum all category budgets
6. Return monthly total
```

### Additional Expenses
```javascript
// New table needed: planning_additional_expenses
{
  id: uuid,
  user_id: uuid,
  month_year: '2026-01', // Format: YYYY-MM
  amount: 500.00,
  notes: 'Holiday bills'
}
```

---

## Alternative Layout Options

### Option A: Card Grid (Current Draft Above)
- Summary cards at top
- Table below
- Traditional spreadsheet feel

### Option B: Timeline View
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2026 Timeline                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                            â”‚
â”‚ Jan â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ $1,500 saved (25%)         â”‚
â”‚ Feb â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ $2,000 saved (33%)         â”‚
â”‚ Mar â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘ $800 saved (13%)           â”‚
â”‚ Apr â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ $2,000 saved (33%)         â”‚
â”‚ ...                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Option C: Chart-First
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Income vs Spending (2026)                 â”‚
â”‚                                            â”‚
â”‚  8k â”¤                                      â”‚
â”‚  6k â”¤â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ Income       â”‚
â”‚  4k â”¤â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ Spending    â”‚
â”‚  2k â”¤â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ Savings     â”‚
â”‚  0k â””â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€ â”‚
â”‚      J  F  M  A  M  J  J  A  S  O  N  D  â”‚
â”‚                                            â”‚
â”‚  [Show Table View]                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Questions for You

Before I build this, please let me know:

1. **Layout preference**: 
   - Option A (table-first)?
   - Option B (timeline)?
   - Option C (chart-first)?
   - Or combination?

2. **Additional Expenses**:
   - Just amount? âœ“
   - Or also notes field for context? âœ“
   - Should we track categories for additional expenses?

3. **Time range**:
   - Just 12 months (current year)?
   - Or ability to see multiple years at once?
   - Should we show past months differently?

4. **Calculations**:
   - Income = recurring only?
   - Or include one-time income too?
   - Budget = current categories only?
   - Or include actual spending if month is past?

5. **Features**:
   - Export to CSV/Excel?
   - Print view?
   - Comparison to actuals (for past months)?

---

## Database Changes Needed

### New Table
```sql
CREATE TABLE planning_additional_expenses (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES users(id),
  month_year TEXT NOT NULL, -- 'YYYY-MM'
  amount NUMERIC(10, 2) NOT NULL,
  notes TEXT,
  created_at TIMESTAMP,
  UNIQUE(user_id, month_year)
);
```

### Indexes
```sql
CREATE INDEX idx_planning_user_month 
ON planning_additional_expenses(user_id, month_year);
```

---

## Next Steps

Let me know which direction you prefer and any adjustments, then I'll build it! 

Options:
1. **Quick build**: I make it based on draft above
2. **Customized**: You tell me changes/preferences first
3. **Iterate**: I build basic version, we refine together

What do you think? ğŸš€
